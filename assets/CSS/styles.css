/* --- SHARED THEME VARIABLES --- */
:root {
    --bg-gradient: radial-gradient(circle at top left, #1a2a3a, #050505);
    --glass-bg: rgba(255, 255, 255, 0.03);
    --glass-border: rgba(255, 255, 255, 0.1);
    --glass-blur: blur(20px);
    --text-main: #ffffff;
    --text-sub: #8b9bb4;
    --text-accent: #38bdf8;
    --text-live: #22c55e;
    --btn-bg: rgba(255, 255, 255, 0.05);
    --btn-hover: rgba(255, 255, 255, 0.15);
    --shadow: 0 8px 32px 0 rgba(0, 0, 0, 0.37);
}

/* --- RESET & BASICS --- */
* {
    box-sizing: border-box;
    user-select: none;
    -webkit-tap-highlight-color: transparent;
    outline: none;
}

body {
    margin: 0;
    padding: 0;
    background: var(--bg-gradient);
    color: var(--text-main);
    font-family: 'Segoe UI', system-ui, sans-serif;
    height: 100vh;
    width: 100vw;
    overflow: hidden;
}

/* --- MAIN LAYOUT GRID --- */
.main-container {
    display: grid;
    /* CHANGE: Use minmax(0, 1fr) instead of just 1fr. 
       This forces the middle row to stay within the viewport limits. */
    grid-template-rows: 60px 100px minmax(0, 1fr) 80px; 
    height: 100%;
    width: 100%;
    padding: 20px;
    gap: 20px;
}

/* REMOVED .battery-display class */

/* --- SOURCE BAR --- */
.source-bar {
    display: flex;
    gap: 15px;
    overflow-x: auto;
    padding: 5px;
    align-items: center;
    
    /* CHANGED: Moves buttons to the far right */
    justify-content: flex-end; 
    
    /* NEW: Adds a little breathing room from the screen edge */
    padding-right: 40px; 
}

/* Note: mapped to .source-btn for styling, but keeping source-button classes for JS compatibility */
.source-btn, 
.source-button, 
.source-button-active {
    height: 80px;
    min-width: 80px;
    border-radius: 16px;
    background: var(--btn-bg);
    border: 1px solid var(--glass-border);
    color: var(--text-main);
    display: flex;
    flex-direction: column;
    justify-content: center;
    align-items: center;
    cursor: pointer;
    transition: all 0.2s;
    font-size: 0.8rem;
    gap: 5px;
}

.source-btn:active, 
.source-btn.active, 
.source-button-active {
    background: var(--text-accent);
    color: #000;
    box-shadow: 0 0 15px var(--text-accent);
    border-color: var(--text-accent);
}

.source-btn img, .source-button img {
    width: 32px;
    height: 32px;
    object-fit: contain;
}

/* --- CONTENT AREA --- */
.content-area {
    position: relative;
    width: 100%;
    height: 100%;
}

.sub-page-container {
    display: grid;
    /* CHANGE: Fixed width for Remote (340px), Rest for Channels */
    grid-template-columns: 340px 1fr; 
    gap: 30px;
    height: 100%;
    width: 100%;
}
.channel-grid {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(190px, 1fr));
    align-content: start; 
    gap: 15px;
    
    /* Flex logic to fill remaining space */
    width: 100%;
    flex: 1; 
    min-height: 0; 
    
    /* Scroll logic */
    overflow-y: auto; 
    padding-right: 5px;
    scroll-behavior: smooth;
}

/* --- GLASS BOX COMPONENT --- */
.glass-box {
    background: var(--glass-bg);
    backdrop-filter: blur(20px);
    border: 1px solid var(--glass-border);
    border-radius: 24px;
    box-shadow: var(--shadow);
    padding: 20px;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    position: relative;
    
    min-height: 0;  /* Allows the box to shrink below its content size */
    height: 100%;   /* Forces it to fill the grid cell exactly */
}

/* --- REMOTE CONTROL STYLING --- */
.remote-container {
    display: flex;
    flex-direction: column;
    /* CHANGE: Reduced gap from 20px to 12px to pack buttons tighter */
    gap: 12px; 
    width: 100%;
    /* CHANGE: Ensure it centers within the new narrower column */
    align-items: center; 
}

.remote-row {
    display: flex;
    gap: 15px;
    justify-content: center;
    width: 100%;
    /* NEW: Prevent buttons from stretching weirdly */
    flex-shrink: 0; 
}

.r-btn {
    background: var(--btn-bg);
    border: 1px solid var(--glass-border);
    color: var(--text-main);
    border-radius: 50%;
    width: 60px;
    height: 60px;
    display: flex;
    justify-content: center;
    align-items: center;
    font-weight: 600;
    cursor: pointer;
    transition: all 0.1s;
}

.r-btn:active {
    background: var(--text-main);
    color: #000;
    transform: scale(0.95);
}

.r-btn.pill {
    width: 100px;
    border-radius: 30px;
}

.r-btn.rect {
    width: 100%;
    border-radius: 12px;
    height: 50px;
}

/* --- DPAD GRID --- */
.dpad-grid {
    display: grid;
    grid-template-columns: 1fr 1fr 1fr;
    grid-template-rows: 1fr 1fr 1fr;
    gap: 5px;
    background: rgba(0, 0, 0, 0.2);
    padding: 10px;
    border-radius: 50%;
    width: 220px;
    height: 220px;
    margin: 10px 0;
    align-self: center;
}

.dpad-btn {
    background: transparent;
    border: none;
    color: var(--text-main);
    font-size: 1.5rem;
    display: flex;
    justify-content: center;
    align-items: center;
    cursor: pointer;
    border-radius: 10px;
}

.dpad-btn:active {
    background: rgba(255, 255, 255, 0.2);
}

.dpad-center {
    background: var(--btn-bg);
    border-radius: 50%;
    border: 1px solid var(--glass-border);
}


/* --- TRANSPORT & COLORS --- */
.transport-bar {
    background: rgba(0, 0, 0, 0.3);
    border-radius: 40px;
    padding: 5px;
    display: flex;
    gap: 10px;
}

/* --- COLOR ROW CONTAINER --- */
.color-row {
    display: flex;
    flex-direction: row;    /* Forces horizontal alignment */
    width: 100%;            /* Spans the full width of the remote box */
    gap: 15px;              /* Space between buttons */
    margin-top: 20px;       /* Pushes it away from the Exit/Back buttons */
    padding: 0 10px;        /* Safety padding so they don't hit the edges */
}

/* --- COLOR BUTTONS --- */
.c-btn {
    flex: 1;                /* MAGIC FIX: Grows width to fill the row evenly */
    height: 25px;           /* Good target size for fingers */
    border-radius: 8px;     /* Nice rounded corners */
    border: none;
    cursor: pointer;
    transition: all 0.1s ease-in-out;
}

/* Specific Colors & Shadows */
.c-btn.red { background: #ef4444; box-shadow: 0 4px 10px rgba(239, 68, 68, 0.3); }
.c-btn.green { background: #22c55e; box-shadow: 0 4px 10px rgba(34, 197, 94, 0.3); }
.c-btn.yellow { background: #eab308; box-shadow: 0 4px 10px rgba(234, 179, 8, 0.3); }
.c-btn.blue { background: #3b82f6; box-shadow: 0 4px 10px rgba(59, 130, 246, 0.3); }

/* Touch Feedback (Glow) */
.c-btn:active {
    transform: scale(0.95);
    filter: brightness(1.4);
    box-shadow: 0 0 15px currentColor;
    opacity: 1;
}

/* --- CHANNELS --- */
.channel-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    width: 100%;
    margin-bottom: 15px;
    
    /* NEW: Forces this header to be tall enough to match the right side */
    min-height: 80px; 
}

/* Tweak Power Button size specifically when it's inside the header */
.channel-header .power-btn {
    width: 50px !important;
    height: 50px !important;
    font-size: 1.2rem;
}

.nav-bar {
    display: flex;
    align-items: center;
    gap: 15px;
    background: var(--btn-bg);
    padding: 5px 15px;
    border-radius: 30px;
    border: 1px solid var(--glass-border);
}


.channel-btn {
    aspect-ratio: 16/9;
    background: var(--btn-bg);
    border: 1px solid var(--glass-border);
    border-radius: 12px;
    display: flex;
    justify-content: center;
    align-items: center;
    color: var(--text-sub);
    font-size: 0.8rem;
    cursor: pointer;
    background-size: contain;
    background-repeat: no-repeat;
    background-position: center;
}

.channel-btn:active {
    border-color: var(--text-accent);
    color: var(--text-accent);
}

/* --- HEADER LAYOUT --- */

.header {
    display: flex;
    align-items: center;
    justify-content: flex-start; /* Aligns Logo to the Left */
    padding: 0 20px;
    position: relative;          /* Critical: Anchors the absolute time element */
    
    /* Keep your existing font settings */
    color: var(--text-sub);
    font-size: 1.2rem;
    text-transform: uppercase;
    letter-spacing: 2px;
}

/* --- LOGO (Left) --- */
.header-logo {
    height: 40px; /* Adjust size as desired */
    width: auto;
    object-fit: contain;
    opacity: 0.9;
}

/* --- TIME (Dead Center) --- */
#current-time {
    position: absolute;          /* Floats freely on top */
    left: 50%;                   /* Move to 50% of the screen width */
    transform: translateX(-50%); /* Shift back by half its own width to center perfectly */
    
    font-weight: 600;
    color: var(--text-main);     /* Optional: Make time brighter/white */
}
/* --- VOLUME BAR --- */
.volume-container {
    background: var(--glass-bg);
    border-radius: 20px;
    display: flex;
    align-items: center;
    padding: 0 30px;
    gap: 20px;
}

.vol-slider {
    -webkit-appearance: none;
    width: 100%;
    height: 6px;
    border-radius: 3px;
    
    /* Magic Gradient: Uses the variable set by JS to create the 'Fill' effect */
    background: linear-gradient(90deg, var(--text-accent) var(--background-size), rgba(255,255,255,0.2) var(--background-size));
}

/* Ensure the thumb (handle) stays on top */
.vol-slider::-webkit-slider-thumb {
    -webkit-appearance: none;
    width: 24px;
    height: 24px;
    background: var(--text-main);
    border-radius: 50%;
    cursor: pointer;
    box-shadow: 0 0 10px rgba(255,255,255,0.5);
    margin-top: 0px; /* Aligns thumb with track if needed */
}

/* Active State (Muted) */
.r-btn.muted-active {
    background-color: #ef4444; /* Bright Red Background */
    border-color: #ef4444;
    color: white;              /* White Icon */
    box-shadow: 0 0 15px rgba(239, 68, 68, 0.4); /* Red Glow */
}

/* Ensure the mute button doesn't shrink */
#volume-mute {
    font-size: 1.5rem;
    flex-shrink: 0;
}

/* --- MUTED SLIDER STATE --- */

/* Change the fill color (gradient) to Red */
.vol-slider.slider-muted {
    background: linear-gradient(90deg, #ef4444 var(--background-size), rgba(255,255,255,0.2) var(--background-size));
}

/* Optional: Change the thumb (handle) to Red as well */
.vol-slider.slider-muted::-webkit-slider-thumb {
    background: #ef4444;
    box-shadow: 0 0 10px rgba(239, 68, 68, 0.5);
}

/* --- UTILITIES --- */
.hide-element,
.display-none-class {
    display: none !important;
}

/* --- LOADING SPINNER --- */
.loading-overlay {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: rgba(0, 0, 0, 0.8);
    display: flex;
    flex-direction: column;
    justify-content: center;
    align-items: center;
    z-index: 100;
}

.spinner {
    width: 50px;
    height: 50px;
    border: 5px solid rgba(255, 255, 255, 0.1);
    border-top: 5px solid var(--text-accent);
    border-radius: 50%;
    animation: spin 1s linear infinite;
}

/* --- ACTIVE CHANNEL FEEDBACK --- */
.channel-btn.active-channel {
    border-color: var(--text-live); /* Bright Green Border */
    background-color: rgba(34, 197, 94, 0.15); /* Use background-COLOR only, so the image stays */
    box-shadow: 0 0 15px rgba(34, 197, 94, 0.4); /* Green Shadow */
    color: #ffffff;
    font-weight: bold;
}

/* --- LARGE NAVIGATION & CHANNEL BUTTONS --- */

/* 1. Make the Network Name text larger */
.nav-text {
    font-size: 1.5rem;   /* Increased from default */
    font-weight: 600;
    min-width: 150px;    /* Gives it more space so text doesn't jump */
    text-align: center;
}

/* 2. Make the Left/Right Arrows larger */
.nav-arrow-btn {
    width: 60px;         /* Increased from 30px */
    height: 60px;        /* Increased from 30px */
    font-size: 1.5rem;   /* Larger arrow icon */
    background: transparent; /* Optional: blends better with bar */
    border: none;
}

/* 3. Channel Control Pills (Slightly smaller for Header) */
.r-btn.nav-pill {
    width: 90px;         /* Reduced from 120px */
    height: 50px;        /* Reduced from 70px */
    border-radius: 25px; /* Adjusted radius */
    font-size: 1rem;     /* Adjusted font size */
    font-weight: bold;
    background: var(--btn-bg);
    border: 1px solid var(--glass-border);
    display: flex;
    justify-content: center;
    align-items: center;
    white-space: nowrap;
}

.r-btn.nav-pill:active {
    background: var(--text-accent);
    color: black;
    transform: scale(0.98);
}

/* --- FOXTEL SPECIFIC STYLING --- */

/* 1. The Characteristic Foxtel Orange OK Button */
#fox-remote-casing-dpad .dpad-center {
    background-color: #ff7900; /* Foxtel Orange */
    color: #000; /* Black text for contrast */
    border-color: #ff7900;
    box-shadow: 0 0 15px rgba(255, 121, 0, 0.4);
    font-weight: 800;
}

#fox-remote-casing-dpad .dpad-center:active {
    background-color: #e66e00;
    transform: scale(0.95);
}

/* 2. Style the "123/Nav" Toggle to look like a Utility Button */
#foxtel-remote-style {
    border-color: var(--text-accent);
    color: var(--text-accent);
    font-size: 0.9rem;
    letter-spacing: 1px;
}

/* 3. Numpad Visibility Animation (Optional) */
#fox-remote-casing-dpad, #fox-remote-casing-numpad {
    transition: opacity 0.2s ease-in-out;
}

/* --- DISPLAY POWER BUTTON --- */
.power-btn {
    border-color: #ef4444; /* Red Border */
    color: #ef4444;        /* Red Icon */
    font-size: 1.5rem;     /* Larger Icon */
    width: 60px !important; /* Force it to be circle/square, not a wide pill */
}

.power-btn:active {
    background-color: #ef4444;
    color: white;
    box-shadow: 0 0 15px rgba(239, 68, 68, 0.5);
}

@keyframes spin {
    0% { transform: rotate(0deg); }
    100% { transform: rotate(360deg); }
}